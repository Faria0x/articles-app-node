<%- include("../../partials/header.ejs") %>
<%- include("../../partials/navbar.ejs") %>

<div class="container">
    <hr>
 <h2>Artigos</h2>
 <a href="/admin/articles/new"  class="btn btn-success">Criar novo artigo</a>
 <hr>
 <table class="table table-bordered">
     <thead>
         <tr>
             <th>Id</th>
             <th>Título</th>
             <th>Slug</th>
             <th>Category</th>
             <th>Ações</th>
        </tr>
     </thead>
     <tbody>
         
        <% articles.forEach((article) => { %>
            <tr>
            <td><%= article.id %> </td>
            <td><%= article.title %></td>
            <td><%= article.slug %></td>
            <td><%= article.categoriaId %></td>
            <td>
                <form onsubmit="confirmarDelete(event, this)" method="post" action="/articles/delete" style="display: inline;">
                    <input type="hidden" name="id" value="<%= article.id %>">
                <button type="submit" class="btn btn-danger">Excluir</button>
            </form>
            </td>
        </tr>
      <%  }) %>
     </tbody>
 </table>
</div>

<%- include("../../partials/footer.ejs") %>

<script>
    function confirmarDelete(e, form){
        e.preventDefault();
        let decisao = confirm("Tem certeza que quer deletar esse artigo?")
        if(decisao) {
            form.submit()
        }else {

        }

    }
</script>